<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <title>Agenda View Single</title>
    <style>
      body {
        margin: 0;
        background-color: #edf5ef;
        font-family: "Rubik", sans-serif;
      }
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      p {
        margin: 0px;
      }
      .agenda_page {
        padding: 10px;
        height: calc(100% - 94px);
        .agenda_intro {
          display: flex;
          align-items: center;
          gap: 10px;

          .arrow_left {
            border: 1.5px solid #000;
            padding: 3px;
            border-radius: 3px;
            cursor: pointer;
          }

          .box {
            .meeting_agenda_title {
              font-size: 16px;
              color: #525252;
            }
            .meeting_agenda {
              color: #20313a;
              font-size: 32px;
            }
            .labels {
              display: flex;
              align-items: center;
              gap: 5px;
              .label {
                font-size: 14px;
                background: #d4d4d4;
                color: #00410c;
                padding: 2px 6px;
                border-radius: 3px;
                display: flex;
                align-items: center;
                width: fit-content;
              }
            }
          }

          .create_btn {
            background: #016d24;
            color: #fff;
            box-shadow: 1px 1px 3px 0px #002c0ee5;
            border-radius: 5px;
            outline: none;
            border: none;
            padding: 7px 25px;
            font-size: 16px;
            cursor: pointer;
            margin-left: auto;
          }
        }
        .view_type {
          display: flex;
          align-items: center;
          gap: 10px;
          margin-top: 15px;
          .view_div {
            box-shadow: 1px 1px 3px 0px #c9cfcbe5, -1px -1px 2px 0px #ffffffe5,
              1px -1px 2px 0px #c9cfcb33, -1px 1px 2px 0px #c9cfcb33,
              -1px -1px 2px 0px #c9cfcb80 inset, 1px 1px 2px 0px #ffffff4d inset;
            background: linear-gradient(135deg, #f9fffb 100%, #e1e8e3 0%);
            border-bottom: 1px solid #edf5ef;
            border-radius: 8px;
            padding: 10px 15px;
            display: flex;
            cursor: pointer;
            .view_icon {
              width: 15px;
            }
          }
          .selected {
            background: #016d24;
            box-shadow: -1px 1px 3px 0px #002c0ee5 inset,
              1px -1px 2px 0px #02ae3ae5 inset,
              -1px -1px 2px 0px #002c0e33 inset, 1px 1px 2px 0px #002c0e33 inset,
              1px -1px 2px 0px #002c0e80, -1px 1px 2px 0px #02ae3a4d;
            border-bottom: 1px solid #edf5ef;
          }
          .calendar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 200px;
            background: linear-gradient(135deg, #f9fffb 0%, #e1e8e3 100%);
            box-shadow: 1px 1px 3px 0px #c9cfcbe5, -1px -1px 2px 0px #ffffffe5,
              1px -1px 2px 0px #c9cfcb33, -1px 1px 2px 0px #c9cfcb33,
              -1px -1px 2px 0px #c9cfcb80 inset, 1px 1px 2px 0px #ffffff4d inset;
            padding: 5px 15px;
            border-radius: 10px;
            border: 1px solid #20313a33;
            margin-left: auto;
            .date {
              color: #20313a;
              font-size: 16px;
              font-weight: 600;
            }
            .calendar_icon {
              color: #20313a;
              cursor: pointer;
            }
          }
        }

        .agenda_lists {
          margin-top: 5px;
          height: calc(100vh - 230px);
          overflow-y: scroll;

          &::-webkit-scrollbar {
            width: 3px;
          }
          &::-webkit-scrollbar-track {
            background: transparent;
          }
          &::-webkit-scrollbar-thumb {
            background: rgb(161, 161, 161);
            height: 100px;
          }

          .meeting {
            margin-top: 15px;
            padding: 15px;
            background-color: #eff9f0;
            border-radius: 8px;
            border: 0.5px solid #009b1c;
            box-shadow: 5px 5px 13px 0px #d5dcd7e5, -5px -5px 10px 0px #ffffffe5,
              5px -5px 10px 0px #d5dcd733, -5px 5px 10px 0px #d5dcd733,
              -1px -1px 2px 0px #d5dcd780 inset, 1px 1px 2px 0px #ffffff4d inset;

            .cover {
              display: flex;
              align-items: center;
              gap: 10px;
              cursor: pointer;

              .counter {
                margin-bottom: auto;
                font-weight: bold;
                color: #20313a;
              }

              .details {
                display: flex;
                flex-direction: column;
                gap: 5px;
                align-items: flex-start;

                p {
                  font-size: 16px;
                  font-weight: bold;
                }
                .tag {
                  font-size: 12px;
                  padding: 3px 8px;
                  border-radius: 10px;
                  background: #d7d7d7;
                  color: #5b6971;
                  margin-right: 10px;
                }

                .no-mom-tag {
                  background-color: #fcdcdc;
                  color: #f44336;
                }
                .selected_tag {
                  background: #d4e6d8;
                  color: #20313a;
                }
              }

              .left_div {
                margin-left: auto;
                display: flex;
                align-items: center;
                gap: 10px;
                .add_task {
                  background: #016d24;
                  color: #fff;
                  box-shadow: 1px 1px 3px 0px #002c0ee5;
                  border-radius: 5px;
                  outline: none;
                  border: none;
                  padding: 7px 25px;
                  font-size: 16px;
                  cursor: pointer;
                }
                .arrow_down {
                  /* margin-left: auto; */
                  cursor: pointer;
                }
              }
            }
            .form {
              margin-top: 10px;
              border-top: 1px solid #555;
              padding-top: 10px;
              margin-left: 2%;
              .textarea {
                width: calc(100% - 10px);
                border-radius: 5px;
                box-shadow: 2px 2px 5px 0px #d1d8d2e5 inset,
                  -2px -2px 4px 0px #ffffffe5 inset,
                  2px -2px 4px 0px #d1d8d233 inset,
                  -2px 2px 4px 0px #d1d8d233 inset, -1px -1px 2px 0px #d1d8d280,
                  1px 1px 2px 0px #ffffff4d;
                background: #edf5ef;
                padding: 5px;
                outline: none;
              }
            }
          }
        }
      }
    </style>
  </head>
  <body>
    <div class="agenda_page">
      <div class="agenda_intro">
        <i class="fa-solid fa-arrow-left arrow_left"></i>
        <div class="box">
          <p class="meeting_agenda_title">Meeting Agenda</p>
          <h2 class="meeting_agenda">Fund allocation</h2>
          <div class="labels">
            <span class="label"><li>3x Weekly</li></span>
            <span class="label"><li>Department-Finance</li></span>
          </div>
        </div>
        <button class="create_btn">Create Meeting</button>
      </div>
      <div class="view_type">
        <div class="view_div selected">
          <img class="view_icon" src="./assets/list.png" alt="" />
        </div>
        <div class="view_div">
          <img class="view_icon" src="./assets/grid.png" alt="" />
        </div>
        <div class="calendar">
          <span class="date">Aug, 2024</span>
          <i class="fa-solid fa-calendar calendar_icon"></i>
        </div>
      </div>

      <div class="agenda_lists"></div>
    </div>
    <script>
      const meetingAgenda = [
        {
          date: "10 August, 2024",
          day: "Wednesday",
          momPoints: [
            {
              mom: "Briefly present the total available budget for the period.",
            },
          ],
          tasksPoints: [],
        },
        {
          date: "11 August, 2024",
          day: "Thursday",
          momPoints: [],
          tasksPoints: [],
        },
        {
          date: "12 August, 2024",
          day: "Wednesday",
          momPoints: [],
          tasksPoints: [{ task: "New Task by JD" }],
        },
        {
          date: "13 August, 2024",
          day: "Thursday",
          momPoints: [],
          tasksPoints: [],
        },
        {
          date: "14 August, 2024",
          day: "Wednesday",
          momPoints: [
            {
              mom: "Briefly present the total available budget for the period.",
            },
          ],
          tasksPoints: [],
        },
        {
          date: "15 August, 2024",
          day: "Thursday",
          momPoints: [],
          tasksPoints: [],
        },
        {
          date: "16 August, 2024",
          day: "Wednesday",
          momPoints: [
            {
              mom: "Briefly present the total available budget for the period.",
            },
          ],
          tasksPoints: [],
        },
        {
          date: "17 August, 2024",
          day: "Thursday",
          momPoints: [],
          tasksPoints: [],
        },
        {
          date: "18 August, 2024",
          day: "Friday",
          momPoints: [
            {
              mom: "Briefly present the total available budget for the period.",
            },
            {
              mom: "Identify high-priority projects that need immediate funding.",
            },
            {
              mom: "Discuss the necessary operational costs, including salaries, utilities, and essential services.",
            },
            {
              mom: "Allocation for marketing campaigns, sales initiatives, and customer acquisition efforts.",
            },
            {
              mom: "Fund allocation for innovation, product development, or new service offerings",
            },
          ],
          tasksPoints: [
            {
              taskTitle: "Check “Task Master” for high-priority projects",
              taskInfo:
                "Review the 'Task Master' dashboard for any high-priority projects or tasks that require immediate attention.",
              assignedTo: "Aakash Saxena",
              dueDate: "16 August",
              priority: "High",
            },
            {
              taskTitle: "Analyze Operational Costs Breakdown",
              taskInfo:
                "Evaluate and discuss the necessary operational costs, including employee salaries, utility expenses, and essential services such as software subscriptions or equipment maintenance.",
              assignedTo: "Anusha",
              dueDate: "18 August",
              priority: "Medium",
            },
            {
              taskTitle: "Plan Marketing and Sales Budget Allocation",
              taskInfo:
                "Determine the budget allocation for upcoming marketing campaigns, sales initiatives, and customer acquisition efforts.",
              assignedTo: "Shiva",
              dueDate: "20 August",
              priority: "Low",
            },
          ],
        },
      ];

      const agendaLists = document.querySelector(".agenda_lists");

      function fetchContent(url, pointsDivId) {
        fetch(url)
          .then((response) => response.text())
          .then((html) => {
            document.getElementById(pointsDivId).innerHTML = html;

            const scripts = body.querySelectorAll("script");
            scripts.forEach((script) => {
              const newScript = document.createElement("script");
              newScript.textContent = script.textContent; // Add the script content
              document.body.appendChild(newScript); // Append and execute it
              document.body.removeChild(newScript); // Clean up the script tag
            });
          })
          .catch((error) => {
            console.error("Error loading content:", error);
          });
      }

      meetingAgenda.forEach((meeting, index) => {
        // Create meeting container
        const meetingDiv = document.createElement("div");
        meetingDiv.className = "meeting";

        // Create cover div
        const coverDiv = document.createElement("div");
        coverDiv.className = "cover";

        // Create counter
        const counterDiv = document.createElement("div");
        counterDiv.className = "counter";
        counterDiv.textContent = `${index + 1}.`;

        // Create details section
        const detailsDiv = document.createElement("div");
        detailsDiv.className = "details";

        const dateParagraph = document.createElement("p");
        dateParagraph.textContent = `${meeting.date} | ${meeting.day}`;

        const tagsDiv = document.createElement("div");
        tagsDiv.className = "tags";

        // Create a unique ID for points_div
        const pointsDivId = `points_div_${index}`;
        const pointsDiv = document.createElement("div");
        pointsDiv.className = "points_div";
        pointsDiv.id = pointsDivId;

        // Create formDiv
        const formDiv = document.createElement("div");
        formDiv.className = "form";

        // Create Add Task Button
        const addTaskBtn = document.createElement("button");
        addTaskBtn.innerText = "Add Task";
        addTaskBtn.className = "add_task";
        addTaskBtn.style.display = "none"; // Initially hidden

        // Create arrow down icon
        const arrowDown = document.createElement("i");
        arrowDown.className = "fa-solid fa-caret-down arrow_down";

        // Add event listener for cover click
        coverDiv.addEventListener("click", function () {
          const form = this.nextElementSibling;

          if (form) {
            form.style.display =
              form.style.display === "none" ? "block" : "none";
            if (form.style.display === "block") {
              if (meeting.momPoints.length > 0) {
                document.querySelector(".mom_tag").className =
                  "tag selected_tag";
                document
                  .querySelector(".task_tag")
                  .classList.remove("selected_tag");
                fetchContent("momPoints.html", pointsDivId);
              } else if (meeting.tasksPoints.length > 0) {
                document.querySelector(".task_tag").className =
                  "tag selected_tag";
                document
                  .querySelector(".mom_tag")
                  .classList.remove("selected_tag");
                fetchContent("taskPoints.html", pointsDivId);
              }
            }
          }
        });

        coverDiv.appendChild(counterDiv);
        coverDiv.appendChild(detailsDiv);

        // Handle "No MOM Added" case
        if (
          meeting.momPoints.length === 0 &&
          meeting.tasksPoints.length === 0
        ) {
          const noMomTag = document.createElement("span");
          noMomTag.className = "tag no-mom-tag";
          noMomTag.textContent = "No MOM Added";
          tagsDiv.appendChild(noMomTag);

          // Create and append textarea
          const textarea = document.createElement("textarea");
          textarea.placeholder = "Type discussed point here";
          textarea.className = "textarea";
          textarea.rows = "4";
          formDiv.appendChild(textarea);

          // Ensure formDiv is hidden when no MOM or tasks
          formDiv.style.display = "none";
        } else {
          // Create tags for MOM and Task
          const momTag = document.createElement("span");
          const taskTag = document.createElement("span");
          momTag.className = "mom_tag tag";
          taskTag.className = "task_tag tag";
          momTag.innerHTML = `<i class="fa-solid fa-circle-dot"></i> ${meeting.momPoints.length} MOM`;
          taskTag.innerHTML = `<i class="fa-regular fa-clipboard"></i> ${meeting.tasksPoints.length} Task`;
          tagsDiv.appendChild(momTag);
          tagsDiv.appendChild(taskTag);

          // Initialize formDiv visibility
          formDiv.style.display = "none";

          // Add pointsDiv to formDiv
          formDiv.appendChild(pointsDiv);

          // Set default content to momPoints.html if momPoints are present
          if (meeting.momPoints.length > 0) {
            fetchContent("momPoints.html", pointsDivId);
          } else if (meeting.tasksPoints.length > 0) {
            fetchContent("taskPoints.html", pointsDivId);
          }

          // Event listeners for tags
          momTag.addEventListener("click", () => {
            fetchContent("momPoints.html", pointsDivId);
            momTag.className = "tag selected_tag";
            taskTag.classList.remove("selected_tag");
            addTaskBtn.style.display = "none"; // Hide Add Task button for MOM tag
          });

          taskTag.addEventListener("click", (e) => {
            e.stopPropagation();
            taskTag.className = "tag selected_tag";
            momTag.classList.remove("selected_tag");
            addTaskBtn.style.display = "block"; // Show Add Task button for Task tag
            fetchContent("taskPoints.html", pointsDivId);
          });

          // Add Add Task button to left_div
          const left_div = document.createElement("div");
          left_div.className = "left_div";
          left_div.appendChild(addTaskBtn);
          left_div.appendChild(arrowDown);

          coverDiv.appendChild(left_div);
        }

        detailsDiv.appendChild(dateParagraph);
        detailsDiv.appendChild(tagsDiv);

        meetingDiv.appendChild(coverDiv);
        meetingDiv.appendChild(formDiv); // Append formDiv here

        // Append meetingDiv to agendaLists
        agendaLists.appendChild(meetingDiv);
      });

      console.log("meeting Page");
    </script>
  </body>
</html>
